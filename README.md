# MPS 系统 - 主生产计划管理系统

这是一个基于 Spring Boot 后端和 Vue.js 前端的 MPS (Master Production Schedule) 系统，能够输入 MPS 记录并自动生成采购计划和生产计划。

## 系统功能

### 核心功能
- **MPS 记录输入**: 输入产品基本信息、物料清单(BOM)、库存信息和生产部署结构
- **采购计划生成**: 根据 BOM 和库存信息自动计算物料需求，生成采购计划
- **生产计划生成**: 根据生产部署结构生成详细的生产工序计划
- **实时计算**: 自动计算净需求、成本、生产时间等关键指标

### 数据模型
- **MPS 记录**: 产品编码、名称、数量、计划日期、交付日期
- **物料清单(BOM)**: 物料编码、名称、类型、单位用量、供应商、提前期、成本
- **库存记录**: 当前库存、安全库存、仓库位置
- **部署结构**: 工作中心、工序顺序、加工时间、准备时间、所需工具和技能

## 技术架构

### 后端技术栈
- **Spring Boot 3.5.6**: 后端框架
- **Spring Data JPA**: 数据持久化
- **H2 Database**: 内存数据库（开发环境）
- **Lombok**: 代码简化
- **Maven**: 依赖管理

### 前端技术栈
- **Vue 3**: 前端框架
- **TypeScript**: 类型安全
- **Vite**: 构建工具
- **CSS3**: 响应式设计

## 快速开始

### 1. 启动后端服务
```bash
cd backend
.\mvnw.cmd spring-boot:run
```
后端服务将在 http://localhost:8080 启动

### 2. 启动前端服务
```bash
cd frontend
npm run dev
```
前端服务将在 http://localhost:5173 启动

### 3. 访问系统
打开浏览器访问 http://localhost:5173

## API 接口

### MPS 相关接口
- `POST /api/mps/create`: 创建 MPS 记录并生成计划
- `GET /api/mps/health`: 健康检查

### 数据库访问
- H2 控制台: http://localhost:8080/h2-console
- JDBC URL: `jdbc:h2:mem:testdb`
- 用户名: `sa`
- 密码: (空)

## 系统特点

### 智能计算
- **净需求计算**: 需求数量 - 可用库存
- **采购时间规划**: 基于提前期自动计算下单和交付日期
- **生产成本估算**: 基于物料成本和加工时间
- **生产时间规划**: 基于工序时间和数量

### 用户体验
- **响应式设计**: 支持桌面和移动设备
- **动态表单**: 可动态添加/删除物料和工序
- **实时预览**: 输入数据时实时预览效果
- **数据验证**: 前端和后端双重数据验证

## 使用说明

1. **填写产品信息**: 输入产品编码、名称、数量、日期等基本信息
2. **配置物料清单**: 添加产品所需的原材料、组件和子装配件
3. **设置库存信息**: 输入当前库存和安全库存水平
4. **定义生产工序**: 配置生产流程中的各个工序和工作中心
5. **生成计划**: 系统自动计算并显示采购计划和生产计划

## 注意事项

- 系统使用 H2 内存数据库，重启后数据会丢失
- 生产环境建议使用 MySQL 或 PostgreSQL
- 所有数值字段都支持小数
- 日期格式为 YYYY-MM-DD
- 系统不进行订单合并，每个物料独立计算

## 开发说明

### 项目结构
```
Springboot_ERP/
├── backend/          # Spring Boot 后端
│   ├── src/main/java/org/example/backend/
│   │   ├── controller/    # 控制器
│   │   ├── service/       # 业务逻辑
│   │   ├── repository/    # 数据访问
│   │   ├── entity/        # 实体类
│   │   └── dto/           # 数据传输对象
│   └── src/main/resources/
└── frontend/         # Vue.js 前端
    └── src/
        ├── components/    # Vue 组件
        └── App.vue        # 主应用
```

### 扩展建议
- 添加用户认证和授权
- 集成真实的 ERP 系统
- 添加报表和导出功能
- 实现订单合并优化
- 添加库存预警功能
